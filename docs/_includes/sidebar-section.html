{% for sb_menu in site.data[page.sidebar_menu] %}
  <div class="sidebar">
    <strong>{{ sb_menu.bar_title }}</strong>
    <hr />
    <ul>

    {% for item in sb_menu.bar_menu %}
      {% if item.title == '-' %}
        <li><hr class="small" /></li>
      {% else %}

        {% assign url = site.baseurl | append: item.url %}

        {% assign classstr = "" %}
        {% if item.url == page.url %}
          {% assign classstr = "active" %}
        {% else %}
          {% assign classstr = "inactive" %}
        {% endif %}

        {% if item.doc %}
        {% assign docStatus = item.doc %}
        {% else %}
        {% assign docStatus = 0 %}
        {% endif %}

        {% if !item.test %}
        {% assign testStatus = item.test %}
        {% else %}
        {% assign testStatus = 0 %}
        {% endif %}

        {% if page.sidebar_menu contains "references-" %}
          <li class="{{ classstr }}">
            {% if docStatus == 0 %}
              <a>{{ item.title }}
            {% elsif item.url != page.url %}
              <a href="{{ url }}"> {{ item.title }}
            {% else %}
              <a>{{ item.title }}
            {% endif %}

            <div class="module-state">
              <div class="tooltip">
                {% if docStatus == 0 %}
                  ğŸ“”
                  <span class="tooltiptext">
                    There is no documentation
                  </span>
                {% elsif docStatus == 1 %}
                  ğŸ•®
                  <span class="tooltiptext">
                    Documentation generated
                  </span>
                {% elsif docStatus == 2 %}
                  ğŸ“–
                  <span class="tooltiptext">
                    Documentation rewritten
                  </span>
                {% elsif docStatus == 3 %}
                  ğŸ—¸
                  <span class="tooltiptext">
                    Documentation has examples
                  </span>
                {% endif %}
              </div>

              <div class="tooltip">
                <!-- 0 no tests -->
                {% if testStatus == 0 %}
                {% assign status_chars = 'ğŸ—’' %}
                  ğŸ—’

                <!-- 1 module parses -->
                {% elsif testStatus == 1 %}
                {% assign status_chars = 'ğŸ—‡' %}
                  ğŸ—‡

                <!-- 2 subs and methods tested -->
                {% elsif testStatus == 2 %}
                {% assign status_chars = 'ğŸ—Š' %}
                  ğŸ—Š

                <!-- 4 signals tested -->
                {% elsif testStatus == 4 %}
                {% assign status_chars = 'ğŸ—²' %}
                  ğŸ—²

                <!-- 8 properties tested -->
                {% elsif testStatus == 8 %}

                <!-- 16 theme tested -->
                {% elsif testStatus == 16 %}

                {% assign status_chars = 'ğŸ—ŠğŸ—²âŒº' %}
                  âŒº
                {% elsif testStatus == 5 %}
                {% assign status_chars = 'ğŸ—ŠğŸ—²âŒº' %}
                  âŒº
                {% elsif testStatus == 5 %}
                {% assign status_chars = 'ğŸ—ŠğŸ—²âŒº' %}
                  âŒº
                {% elsif testStatus == 5 %}
                {% assign status_chars = 'ğŸ—ŠğŸ—²âŒºğŸ—¸' %}
                  ğŸ—¸
                {% endif %}

                  <span class="tooltiptext">
                    {% assign pp = page.dir | append:item.title | append:'.md' %}
                    {% assign pp = pp | remove_first:'/' %}
                    <strong>Test coverage: {{ site.data.testCoverage[pp]["routines"]["coverage"] }} %
                      {{ status_chars }}
                    </strong><br />
                  </span>

              </div>

              <!--div class="tooltip">
                {% if item.ex %}
                  {% assign exurl = site.baseurl | append: item.ex %}
                  <a href="{{ exurl }}" rel="help" target="_blank">âš’</a>
                {% endif %}
              </div-->
            </div>
            </a>
          </li>

        {% else %}
          <li class="{{ classstr }}">
            {% if item.url != page.url %}
              <a href="{{ url }}"> {{ item.title }}
            {% else %}
              <a>{{ item.title }}
            {% endif %}
            </a>
          </li>
        {% endif %}
      {% endif %}
    {% endfor %}

    </ul>
  </div>
{% endfor %}
